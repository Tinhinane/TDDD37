/*
7. Create a view allFlights containing all flights in your database with the following
information: departure_city_name, destination_city_name, departure_time,
departure_day, departure_week, departure_year, nr_of_free_seats,
current_price_per_seat. See the testcode for an example of how it can look like.

*/




CREATE VIEW allFlights AS
    SELECT Route.departure AS 'departure_city_name', Route.arrival AS 'destination_city_name', WeeklyFlight.departureTime AS 'departure_time', WeeklyFlight.day AS 'departure_day', Flight.week AS 'departure_week', WeeklyFlight.year AS 'departure_year', calculateFreeSeats(flightNumber) AS 'nr_of_free_seats', calculatePrice(flightNumber) AS 'current_price_per_seat'
    FROM Flight
    INNER JOIN WeeklyFlight ON Flight.weeklyFlight=WeeklyFlight.id
    INNER JOIN Route ON Route.id=WeeklyFlight.route;
    
    
/*departure_city_name, destination_city_name, departure_time,
departure_day, departure_week, departure_year, nr_of_free_seats,
current_price_per_seat.*/ 


SELECT Route.departure AS 'departure_city_name', Route.arrival AS 'destination_city_name', Flight.week, WeeklyFlight.departureTime, WeeklyFlight.day, WeeklyFlight.year, ,  Route.arrival, calculatePrice(Flight.flightNumber), calculateFreeSeats(Flight.flightNumber)
FROM Flight, WeeklyFlight, Route
WHERE Flight.weeklyFlight= WeeklyFlight.id AND WeeklyFlight.route=Route.id;

SELECT calculateFreeSeats(Flight.flightNumber) 
